<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_vehicule_form" model="ir.ui.view">
        <field name="name">vehicule.form</field>
        <field name="model">vehicule</field>
        <field name="arch" type="xml">
            <form string="Vehicule">
                <header>
                    <button name="verifier_ou_creer_reservation" string="verifier planning" type="object"
                            class="btn-primary"/>
                </header>
                <sheet>
                    <group>
                        <groupe>
                            <group string="INFO DU MODELE" class="custom-group custom-group-width">
                                <field name="modele"/>
                                <field name="categorie"/>
                                <field name="carburant"/>
                                <field name="nombre_deplace"/>
                                <field name="nombre_de_porte"/>
                                <field name="nombre_de_bagage"/>
                                <field name="climatisation"/>
                                <field name="boite_vitesse"/>
                                <field name="euro" invisible="1"/>
                                <field name="dinar" invisible="1"/>
                                <!--                            <field name="prix_achat_eur" readonly="1" decoration-bf="1"/>-->
                            </group>
                        </groupe>

                        <groupe>
                            <group string="INFO DU VEHICULE" class="custom-group custom-group-width"
                                   style="margin-left:1cm;">
                                <field name="color"/>
                                <field name="matricule"/>
                                <field name="numero"/>
                                <field name="zone"/>
                                <field name="date_debut_service"/>
                                <field name="dernier_klm"/>
                                <field name="active_test"/>
                                <field name="prix_achat" decoration-bf="1"/>
                            </group>

                        </groupe>
                    </group>

                </sheet>
            </form>
        </field>
    </record>

    <record id="view_vehicule_tree" model="ir.ui.view">
        <field name="name">vehicule.tree</field>
        <field name="model">vehicule</field>
        <field name="arch" type="xml">
            <tree string="vehicule">
                <field name="matricule"/>
                <field name="numero" widget="badge"/>
                <field name="modele"/>
                <field name="date_debut_service"/>
                <field name="categorie"/>
                <field name="zone"/>
            </tree>
        </field>
    </record>

    <record id="view_vehicule_search" model="ir.ui.view">
        <field name="name">vehicule.search</field>
        <field name="model">vehicule</field>
        <field name="arch" type="xml">
            <search string="vehicule">
                <searchpanel view_types="list,kanban">
                    <field name="zone" icon="fa-map-marker"/>
                    <field name="categorie" icon="fa-tags"/>
                    <field name="modele" icon="fa-cogs"/>
                </searchpanel>
                <field name="name"/>
                <field name="numero"/>
                <field name="matricule"/>
            </search>
        </field>
    </record>

    <record id="action_vehicule" model="ir.actions.act_window">
        <field name="name">Véhicules</field>
        <field name="res_model">vehicule</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="vehicule_agent_rule" model="ir.rule">
        <field name="name">Restriction d'accès aux véhicules par zone pour les agents</field>
        <field name="model_id" ref="gestion_du_parc.model_vehicule"/>
        <field name="groups" eval="[(4, ref('access_rights_groups.group_agent'))]"/>
        <field name="domain_force">[('zone', 'in', user.zone_ids.ids)]</field>
    </record>

    <menuitem id="menu_vehicule_sub"
              name="Vehicules"
              parent="menu_gestion_du_parc"
              sequence="1"
              action="action_vehicule"
              groups="access_rights_groups.group_admin,access_rights_groups.group_ceo"/>
</odoo>
